if(!window._CG){window._CG={};}
window.onload=function(){_CG.init=new init();};_CG={preload:true,autoplay:{buttons:{play:{txt:'Play',enabled:true},pause:{txt:'Pause',enabled:true},remove:{txt:'Remove',enabled:true},reset:{txt:'Reset',enabled:true},save:{txt:'Save',enabled:true}},enabled:true,fadeduration:2,autorotate:5000},_settings:{placeTarget:'CGallery',imagesdir:'gallery-images/',thumbdir:'gallery-images/thumbs/',readFiles:'readfiles.php',expireTime:365,setCookieName:'CookieGallery',readFileType:{rFServer:true,rFClient:false},fileTypes:/(.jpg)|(.gif)|(.png)|(.bmp)$/g,splitArray:/<li>|<a .*?>|<\/a>|<\/li>/ig},displayType:{horizontal:true,vertical:false},isActive:0,images:{},thumbs:{width:114,height:72},loaderGif:'img/loader.gif'};var CGSettings=_CG._settings,checkRequest=false,doneLoading=false,numResourcesLoaded=0;var init=function(){if(CGSettings.placeTarget!=''){var mainHolder=document.getElementById(CGSettings.placeTarget);if(mainHolder){if(_CG.displayType.vertical==true){mainHolder.className='vertical';}else{mainHolder.className='horizontal';}
var preloadMsg=document.createElement('div'),requestImages='',requestThumbs='';preloadMsg.setAttribute('id','preloadMsg');preloadMsg.innerHTML='<img src="'+_CG.loaderGif+'" border="0">';mainHolder.appendChild(preloadMsg);if(CGSettings.imagesdir&&CGSettings.thumbdir){if(CGSettings.readFileType.rFServer===true){if(document.cookie.length>0||document.cookie!=''){var results=document.cookie.match(CGSettings.setCookieName+'=(.*?)(;|$)');if(results){preLoader();}else{httpRequest(requestImages,CGSettings.imagesdir,CGSettings.fileTypes,CGSettings.splitArray,function(){console.log("REQUEST CALLBACK");if(checkRequest===true){console.log("CHECKED SET TRUE");preLoader();}});};}else{httpRequest(requestImages,CGSettings.imagesdir,CGSettings.fileTypes,CGSettings.splitArray,function(){console.log("REQUEST CALLBACK");if(checkRequest===true){console.log("CHECKED SET TRUE");preLoader();}});};}else if(CGSettings.readFileType.rFClient===true){httpRequest(requestImages,CGSettings.imagesdir,CGSettings.fileTypes,CGSettings.splitArray);httpRequest(requestImages,CGSettings.thumbdir,CGSettings.fileTypes,CGSettings.splitArray);};}}else{createErrorNotif('Your defined id doesn\'t match the api id');}}else{createErrorNotif('You must define an id for the gallery placeholder');}}
function praseFiles(images){var cGet=_CG.cookie.get(CGSettings.setCookieName);var preloadMsg=document.getElementById('preloadMsg');if(cGet==null){createErrorNotif('You must enable cookies for the gallery to work');preloadMsg.style.display='none';return false;}
if(cGet!=''){if(setImages(cGet)){doneLoading=true;return true;};}else{var c=_CG.cookie.get(CGSettings.setCookieName);if(c){if(setImages(c)){doneLoading=true;return true;};};};function setImages(c){var getCActive=_CG.cookie.getCActive();var cLength=c.length;for(var i=0;i<cLength;i++){var matchT=c[i].match(/thumb_/),matchA=c[i].match('active_'+getCActive),replaceA=c[i].replace(matchA,''),replaceT=c[i].replace(matchT,''),stringImg=[];if(matchT){stringImg+=(CGSettings.thumbdir+replaceT);}else if(matchA){stringImg+=replaceA;}else{stringImg+=(CGSettings.imagesdir+replaceT);};if(stringImg!=''){images[stringImg]=new Image();images[stringImg].onload=function(){if(this.complete===true){numResourcesLoaded+=1;if((cLength-1)===numResourcesLoaded){preloadMsg.style.display='none';};};};images[stringImg].src=stringImg;}else{preloadMsg.style.display='none';}}
if(_CG.images){var savedImgs=_CG.images;var checkEntries=false;for(var key in savedImgs){if(savedImgs.hasOwnProperty(key)){checkEntries=true;}}
if(checkEntries==true){return true;}else{createErrorNotif('You have deleted all the images from cookies');return false;}};};};function preLoader(){var doneParse=praseFiles(_CG.images);if(doneParse){_CG.buildList();};};function httpRequest(xhr,path,filetype,splitArr,callback){var _xhr=xhr,retrunImageFiles=[],returnImageThumb=[],count=0,total=0,sendUrl=CGSettings.readFiles+'?path='+path;if(window.XMLHttpRequest){_xhr=new XMLHttpRequest();}else if(window.ActiveXObject){try{_xhr=ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(e){try{_xhr=ActiveXObject("Msxml2.XMLHTTP.3.0");}catch(e){try{_xhr=ActiveXObject("Microsoft.XMLHTTP");}catch(e){createErrorNotif("This browser does not support XMLHttpRequest."+e);};};};};if(_xhr){_xhr.onreadystatechange=function(){if(_xhr.readyState==4){if(_xhr.status==200){var responeTxt=_xhr.responseText,matchExtension=responeTxt.match(filetype);if(matchExtension&&responeTxt.length>0&&responeTxt.length!=''){if(CGSettings.readFileType.rFServer===true){var parseResponse=JSON.parse(responeTxt);for(var x=0;x<parseResponse.length;x++){if(parseResponse[x].match(filetype)){retrunImageFiles.push(parseResponse[x]);};};if(retrunImageFiles!=''){callback(_CG.cookie.checkCookies(retrunImageFiles,false,_CG.cookie.getCActive()));};}else if(CGSettings.readFileType.rFClient===true){var splitArray=responeTxt.split(splitArr);total=splitArray.length;for(var x=0;x<splitArray.length;x++){count++;if(splitArray[x].match(filetype)){if(path===CGSettings.imagesdir){retrunImageFiles+=splitArray[x];};if(path===CGSettings.thumbdir){returnImageThumb+='thumb_'+splitArray[x];};};};if(count==total){_CG.cookie.checkCookies(retrunImageFiles,returnImageThumb,_CG.cookie.getCActive());};}else{createErrorNotif('Please make sure you have enabled one reading file option');};}else{createErrorNotif(responeTxt);};}else{createErrorNotif("Error Code:"+_xhr.status+' Error Type:'+_xhr.statusText);};};};if(CGSettings.readFileType.rFServer===true){_xhr.open("GET",sendUrl,true);}else if(CGSettings.readFileType.rFClient===true){_xhr.open("GET",path,true);};_xhr.send(null);};};_CG.cookie=new cookie();function cookie(){var _cookie=this,cookieName=CGSettings.setCookieName,c_start=document.cookie.indexOf(cookieName+"="),c_end=document.cookie.indexOf(";",c_start);this.set=function(name,value,time,active){value=value+',active_'+active;_cookie.setCVal(name,value,time)
checkRequest=true;};this.get=function(check_name){var a_all_cookies=document.cookie.split(';');var a_temp_cookie='';var cookie_name='';var cookie_value='';var b_cookie_found=false;for(i=0;i<a_all_cookies.length;i++){a_temp_cookie=a_all_cookies[i].split('=');cookie_name=a_temp_cookie[0].replace(/^\s+|\s+$/g,'');if(cookie_name==check_name){b_cookie_found=true;if(a_temp_cookie.length>1){cookie_value=unescape(a_temp_cookie[1].replace(/^\s+|\s+$/g,''));cookie_value=cookie_value.split(/,/);};return cookie_value;break;};a_temp_cookie=null;cookie_name='';};if(!b_cookie_found){return null;};};this.checkCookies=function(returnImg,returnThumb,active){if(returnThumb!=false){var cName='CookieGalleryThumbs';_cookie.setCVal(cName,returnThumb,_CG._settings.expireTime,active);_cookie.checkCGal(returnThumb,cName,active);}else{_cookie.checkCGal(returnImg,cookieName,active);};};this.checkCGal=function(_returnImgs,cName,active){if(_returnImgs!=''){if(document.cookie===''||document.cookie.length<=0){_cookie.set(cName,_returnImgs,_CG._settings.expireTime,active);}else{_cookie.getCIndexes(c_start,c_end,_returnImgs,active);};};};this.getCIndexes=function(startVal,endVal,receivedImg,active){if(startVal!=-1){startVal=startVal+cookieName.length+1;if(endVal==-1){endVal=document.cookie.length;};return unescape(document.cookie.substring(startVal,endVal));}else{_cookie.set(cookieName,receivedImg,_CG._settings.expireTime,active);};};this.setCVal=function(name,value,time){if(time){var date=new Date();date.setTime(date.getTime()+(time*24*60*60*1000));var expires="; expires="+date.toGMTString();}else{var expires="";};document.cookie=name+"= "+value+expires+"; path=/";};this.getCActive=function(){var getC=_cookie.get(CGSettings.setCookieName);var repalceA;if(!getC){repalceA=_CG.isActive;}else{for(var i=0;i<getC.length;i++){var matchA=getC[i].match('active_');if(matchA){repalceA=getC[i].replace(matchA,'');}else{repalceA=_CG.isActive;};};};return Number(repalceA);};};_CG.buildList=function(){var mainHolder=document.getElementById(CGSettings.placeTarget),cookieGet=_CG.cookie.get(CGSettings.setCookieName),getCActive=_CG.cookie.getCActive(),thumbs=[],bigImgs=[],mObjs=[],speed=300,countImage,noThumbsInView=0,doReset=false,getNew=0,listH;initList=function(){splitCookies();createDomElements();mergeObjs();listH=document.getElementById('listH');if(listH){storeThumbsInView();storeUlWidth(listH);setThumbs(listH);if(_CG.autoplay.enabled){startAutoPlay(listH,_CG.autoplay.autorotate);};};};var splitCookies=function(){var matchUrl=/thumb_/i;for(var i=0;i<cookieGet.length;i++){if(cookieGet[i].match(matchUrl)){var stripname=cookieGet[i].replace(matchUrl,'');thumbs.push(CGSettings.thumbdir+stripname);}else{bigImgs.push(CGSettings.imagesdir+cookieGet[i])};};};var createDomElements=function(){createBigHolder();creatContorls();createThumbHolder();clickActions();};var createBigHolder=function(){var imgHolder=document.createElement('div'),gControl=document.createElement('div'),cHolders=document.createElement('div'),imgIn=document.createElement('div');if(_CG.autoplay.buttons.play.enabled==true){var start=document.createElement('div');start.setAttribute('id','play');start.setAttribute('class','actionControls');cHolders.appendChild(start);};if(_CG.autoplay.buttons.pause.enabled==true){var stop=document.createElement('div')
stop.setAttribute('id','stop');stop.setAttribute('class','actionControls');cHolders.appendChild(stop);};if(_CG.autoplay.buttons.remove.enabled==true){var remove=document.createElement('div');remove.setAttribute('id','remove');remove.setAttribute('class','actionControls');cHolders.appendChild(remove);};if(_CG.autoplay.buttons.save.enabled==true){var save=document.createElement('div');save.setAttribute('id','save');save.setAttribute('class','actionControls');cHolders.appendChild(save);};if(_CG.autoplay.buttons.reset.enabled==true){var reset=document.createElement('div');reset.setAttribute('id','reset');reset.setAttribute('class','actionControls');cHolders.appendChild(reset);};imgHolder.setAttribute('id','imgHolder');imgIn.setAttribute('id','imgIn');gControl.setAttribute('id','controls');cHolders.setAttribute('id','contorlHolders');mainHolder.appendChild(imgHolder);imgHolder.appendChild(imgIn);imgHolder.appendChild(gControl);gControl.appendChild(cHolders);};var creatContorls=function(){var infoH=document.createElement('div'),prev=document.createElement('div'),photoCaption=document.createElement('div'),next=document.createElement('div');infoH.setAttribute('id','infoH');prev.setAttribute('id','prev');next.setAttribute('id','next');prev.setAttribute('class','moveControls');next.setAttribute('class','moveControls');photoCaption.setAttribute('id','photoCaption');mainHolder.appendChild(infoH);infoH.appendChild(prev);infoH.appendChild(next);infoH.appendChild(photoCaption);};var createThumbHolder=function(){var thumbH=document.createElement('div'),ulList=document.createElement('ul');thumbH.setAttribute('id','thumbH');ulList.setAttribute('id','listH');mainHolder.appendChild(thumbH);thumbH.appendChild(ulList);};var clickActions=function(){var nextBtn=document.getElementById('next'),prevBtn=document.getElementById('prev'),stopBtn=document.getElementById('stop'),playBtn=document.getElementById('play'),removeBtn=document.getElementById('remove'),resetBtn=document.getElementById('reset'),saveBtn=document.getElementById('save');if(playBtn){playBtn.onclick=function(){resetAutoPlayOnClick();};};if(stopBtn){stopBtn.onclick=function(){stopAnimation();};};if(removeBtn){removeBtn.onclick=function(){removeCurrent();};};if(removeBtn){resetBtn.onclick=function(){resetAnimation();};};if(removeBtn){saveBtn.onclick=function(){var stringAction='Save';saveCurrent(stringAction);};};if(nextBtn&&prevBtn){nextBtn.onclick=function(){resetAutoPlayOnClick();moveRight();};prevBtn.onclick=function(){resetAutoPlayOnClick();moveLeft();};};};var addImageToGallery=function(imageConfig){imageConfig={index:imageConfig.index,id:imageConfig.id,thumb:imageConfig.thumb,caption:imageConfig.caption,src:imageConfig.src};return imageConfig;};var setThumbObj=function(){var objThumb=[];for(var x=0;x<thumbs.length;x++){objThumb.push(addImageToGallery({index:x,id:x,thumb:thumbs[x],caption:thumbs[x],src:thumbs[x]}));};return objThumb;};var setImgObj=function(){var objImg=[];for(var x=0;x<bigImgs.length;x++){objImg.push(addImageToGallery({index:x,id:x,thumb:bigImgs[x],caption:bigImgs[x],src:bigImgs[x]}));};return objImg;};var mergeObjs=function(){var objThumb=setThumbObj(),objImgs=setImgObj();for(var p in objThumb){for(var o in objImgs){mObjs[p]={index:objThumb[p].index,id:objThumb[p].id,thumb:objThumb[p].thumb,caption:objImgs[p].src,src:objImgs[p].src};};};setCaptionName();return mObjs;};var setCaptionName=function(){for(var x=0;x<mObjs.length;x++){var getCaption=mObjs[x].caption;var matchDir=getCaption.match(CGSettings.imagesdir);var matchExtension=getCaption.match(CGSettings.fileTypes)
if(matchDir&&matchExtension){var removeDir=getCaption.replace(CGSettings.imagesdir,'');var removeExt=removeDir.replace(CGSettings.fileTypes,'');mObjs[x].caption=removeExt;}};return mObjs;}
var storeThumbsInView=function(){var thumbH=document.getElementById('thumbH'),containerWidth=thumbH.offsetWidth,containerHeight=thumbH.offsetHeight;if(_CG.displayType.vertical==true){noThumbsInView=Math.round(containerHeight/_CG.thumbs.height);}else{noThumbsInView=Math.round(containerWidth/_CG.thumbs.width);}};var storeUlWidth=function(ulH){var setW;if(_CG.displayType.vertical==true){setW=(ulH.style.height=Math.round(mObjs.length*(_CG.thumbs.width+4))+'px');}else{setW=(ulH.style.width=Math.round(mObjs.length*(_CG.thumbs.width+4))+'px');}
return setW;};var setThumbs=function(ulHolder){var x=0,max=mObjs.length,id=0,index=0,imgH=document.getElementById('imgIn'),photoCaption=document.getElementById('photoCaption');for(x;x<max;x++){var liList=document.createElement('li'),id=mObjs[x].id,index=mObjs[x].index,thumbSrc=mObjs[x].thumb,bigSrc=mObjs[x].src,matchSrc=thumbSrc.match(CGSettings.thumbdir),replaceSrc=thumbSrc.replace(matchSrc,''),matchExt=replaceSrc.match(CGSettings.fileTypes),rmvExtension=replaceSrc.replace(matchExt,'');liList.setAttribute('id','list_'+id);ulHolder.appendChild(liList);createImgThumb(rmvExtension,liList,thumbSrc);liList.onclick=function(e){resetAutoPlayOnClick();clickOnThumbnail(e);};if(x==getCActive){if(liList.id=='list_'+getCActive){liList.setAttribute('class','active');createBigImg(getCActive,imgH);photoCaption.innerHTML=mObjs[id].caption;moveHighilightIntoView(getCActive);};};};};var createImgThumb=function(id,list,thumbSrc){if(id!=null||id!=''){var createT=document.createElement('img');createT.setAttribute('id','thumb_'+id);createT.setAttribute('width',_CG.thumbs.width);createT.setAttribute('height',_CG.thumbs.height);createT.src=thumbSrc;list.appendChild(createT);};};var createBigImg=function(id,holder){if(id!=null){var foundId=document.getElementById('img_'+id),createImg;if(countImage!=null){var getImages=holder.getElementsByTagName('img'),imgeLength=getImages.length,x=0;for(x;x<imgeLength;x++){if(countImage.id!=id){var setOpacity=getImages[x];clearInterval(setOpacity.timer);setOpacity.timer=setInterval(function(){fdout(setOpacity);},_CG.autoplay.fadeduration);};};};if(!foundId){createImg=document.createElement('img');createImg.src=mObjs[id].src;createImg.id='img_'+mObjs[id].id;createImg.setOpacity=0;createImg.style.opacity=0;createImg.style.filter='alpha(opacity=0)';holder.appendChild(createImg);}else{createImg=document.getElementById('img_'+id);clearInterval(createImg.timer);};createImg.timer=setInterval(function(){fdin(createImg);},_CG.autoplay.fadeduration);};};var fdin=function(image){if(image.complete){image.setOpacity=image.setOpacity+_CG.autoplay.fadeduration;image.style.opacity=image.setOpacity/100;image.style.filter='alpha(opacity='+image.setOpacity+')';};if(image.setOpacity>=100){image.style.opacity=1;image.style.filter='alpha(opacity=100)';clearInterval(image.timer);countImage=image;};};var fdout=function(image){image.setOpacity=image.setOpacity-_CG.autoplay.fadeduration;image.style.opacity=image.setOpacity/100;image.style.filter='alpha(opacity='+image.setOpacity+')';if(image.setOpacity<=0){clearInterval(image.timer);if(image.parentNode){image.parentNode.removeChild(image);};};};var getImageDataById=function(id){for(var i=0;i<mObjs.length;i++){if(mObjs[i].id==id){return mObjs[i];};};};var clickOnThumbnail=function(e){var target=e?e.target:window.event.srcElement;var getTargetId=target.parentNode.id,getId=getTargetId.replace('list_',''),id=Number(getId);_CG.isActive=id;selectImage(id);};var moveRight=function(ulList){if(getCActive){_CG.isActive=getCActive++;}
_CG.isActive=_CG.isActive+1;if(_CG.isActive>=mObjs.length){getCActive=0;_CG.isActive=0;};selectImage(mObjs[_CG.isActive].id);};var moveLeft=function(){var listH=document.getElementById('listH');var ulC=listH.children;if(getCActive){_CG.isActive=getCActive--;}
_CG.isActive=_CG.isActive-1;if(_CG.isActive<0){_CG.isActive=mObjs.length-1;};selectImage(mObjs[_CG.isActive].id);};var createThumbHighLight=function(id){var imageData=getImageDataById(id);for(var x=0;x<mObjs.length;x++){var getList=document.getElementById('list_'+mObjs[x].id);if(mObjs[x].id==id){getList.setAttribute('class','active');}else{if(getList.className=='active'){getList.removeAttribute('class','active');};};};};var isLocatedBeyondRightEdgeOfView=function(currentLi,ulWidth,sendNo){for(var x=0;x<mObjs.length;x++){if(mObjs[x].id==currentLi){var remainingTillEnd=mObjs.length-currentLi;if(remainingTillEnd<(noThumbsInView-sendNo)){var getLast=Math.min(noThumbsInView-1,mObjs.length-1);newIndexHighlight=((getLast*_CG.thumbs.width)-(ulWidth-_CG.thumbs.width));}}}}
var moveHighilightIntoView=function(id){var newIndexHighlight,listH=document.getElementById('listH'),activeLi=getActiveEl(listH),getHWidth=listH.offsetWidth,counter=0;if(activeLi==0){newIndexHighlight=0;}
else if(activeLi==mObjs.length-1){if(_CG.displayType.vertical==true){newIndexHighlight=0;}else{var getLast=Math.min(noThumbsInView-1,mObjs.length-1);newIndexHighlight=((getLast*_CG.thumbs.width)-(getHWidth-_CG.thumbs.width));}}
else if(activeLi>noThumbsInView){newIndexHighlight=-(noThumbsInView-1)*_CG.thumbs.width;for(var x=0;x<mObjs.length;x++){if(mObjs[x].id==activeLi){var remainingTillEnd=mObjs.length-activeLi;if(remainingTillEnd<(noThumbsInView)){var getLast=Math.min(noThumbsInView-1,mObjs.length-1);newIndexHighlight=((getLast*_CG.thumbs.width)-(getHWidth-_CG.thumbs.width));}}}}
else if(activeLi>=(noThumbsInView-1)){var getNew=Math.min(noThumbsInView-1,activeLi-1);newIndexHighlight=-(getNew*_CG.thumbs.width);isLocatedBeyondRightEdgeOfView(activeLi,getHWidth,1);}
else if(activeLi<=0){newIndexHighlight=activeLi;}
else{newIndexHighlight=0;}
listH.style.webkitTransitionDuration=listH.style.MozTransitionDuration=speed+'ms';listH.style.msTransitionDuration=listH.style.OTransitionDuration=speed+'ms';listH.style.transitionDuration=speed+'ms';if(_CG.displayType.vertical==true){listH.style.top=newIndexHighlight+'px';}else{listH.style.left=newIndexHighlight+'px';}};var getActiveEl=function(listH){var getLi=listH.getElementsByTagName('li'),foundActive;for(var x=0;x<getLi.length;x++){if(getLi[x].className=='active'){foundActive=getLi[x].id.replace('list_','');break;};};return Number(foundActive);};var selectImage=function(id){var holder=document.getElementById('imgIn'),imageData=getImageDataById(id),photoCaption=document.getElementById('photoCaption');createBigImg(id,holder);createThumbHighLight(id);moveHighilightIntoView(id);photoCaption.innerHTML=mObjs[id].caption;};var startAutoPlay=function(ulList,time){if(thumbs!=''){ulList.timer=setInterval(function(){moveRight();},time);}};var stopAnimation=function(){var listH=document.getElementById('listH');clearInterval(listH.timer);};var resetAutoPlayOnClick=function(){var listH=document.getElementById('listH');clearInterval(listH.timer);startAutoPlay(listH,_CG.autoplay.autorotate);};var resetAnimation=function(){stopAnimation();var stringAction='reset';doReset=true;_CG.isActive=0;getCActive=0;saveCurrent(stringAction)};var saveCurrent=function(stringAction){stopAnimation();var listH=document.getElementById('listH'),activeLi=getActiveEl(listH),imgArr=_CG.cookie.get(CGSettings.setCookieName),getCurrentActive=_CG.cookie.getCActive();for(var i=0;i<imgArr.length;i++){var matchExact=imgArr[i].match('active_'+getCurrentActive),matchAp=imgArr[i].match('active_'+activeLi);if(doReset==true){imgArr[i]=imgArr[i].replace(matchAp,'active_0');}else if(matchExact){imgArr[i]=imgArr[i].replace(matchExact,'active_'+activeLi);};};confirmationPopup(stringAction,imgArr);};var removeCurrent=function(){stopAnimation();var removeString='delete',listH=document.getElementById('listH'),imgIn=document.getElementById('imgIn'),activeLi=getActiveEl(listH),getCurrentLi=document.getElementById('list_'+activeLi),imgArr=_CG.cookie.get(CGSettings.setCookieName),getTName=getThumbNames();for(var x=0;x<getTName.length;x++){var currentT=document.getElementById('thumb_'+getTName[x]),currentB=mObjs[x].src,matchSrc=currentB.match(CGSettings.imagesdir),replaceSrc=currentB.replace(matchSrc,'');if(currentT.parentNode==getCurrentLi){for(var i=0;i<imgArr.length;i++){var test=imgArr[i].match(CGSettings.fileTypes);var matchAT=imgArr[i].match(currentT.id+test),matchBA=imgArr[i].match(replaceSrc);if(matchAT){imgArr[i]=imgArr[i].replace(matchAT,'');}else if(matchBA){imgArr[i]=imgArr[i].replace(matchBA,'');};};break;};};imgArr.clean("");confirmationPopup(removeString,imgArr)};var confirmationPopup=function(action,sendImages){var alertHolder=document.createElement('div'),wrapper=document.getElementById(CGSettings.placeTarget);alertHolder.setAttribute('id','alertHolder');alertHolder.innerHTML=('<div class="innerHolder"><div>Are you sure you want to '+action+'?</div>'+'<div class="btnBig left" id="btnYes">Yes</div><div id="btnNo" class="btnBig right">No</div>'+'<div class="clear"><!-- empty --></div></div>');wrapper.appendChild(alertHolder);var btnYes=document.getElementById('btnYes'),btnNo=document.getElementById('btnNo');if(btnYes){btnYes.onclick=function(){confirmationActions(action);_CG.cookie.setCVal(CGSettings.setCookieName,sendImages,_CG._settings.expireTime);wrapper.removeChild(alertHolder);return true;}
btnNo.onclick=function(){wrapper.removeChild(alertHolder);return false;};};};var confirmationActions=function(action){console.log('CONFIRM')
var listH=document.getElementById('listH'),activeLi=getActiveEl(listH),getCurrentLi=document.getElementById('list_'+activeLi),getCurrentBig=document.getElementById('img_'+activeLi),getHWidth=listH.offsetWidth;if(action=='delete'){var newWidth=(getHWidth-_CG.thumbs.width)-5;listH.style.width=newWidth+'px';getCurrentLi.style.display='none';getCurrentBig.style.display='none';moveRight();}
if(action=='reset'){selectImage(_CG.isActive);resetAutoPlayOnClick();}}
var getThumbNames=function(){var saveNew=[];for(var x=0;x<mObjs.length;x++){var bigSrc=mObjs[x].thumb,matchSrc=bigSrc.match(CGSettings.thumbdir),replaceSrc=bigSrc.replace(matchSrc,''),matchExt=replaceSrc.match(CGSettings.fileTypes),rmvExtension=replaceSrc.replace(matchExt,'');saveNew.push(rmvExtension)};return saveNew;};if(CGSettings.placeTarget!=''){if(mainHolder){if(doneLoading===true){initList();};};};};function createErrorNotif(string){var errorMsg=document.createElement('div');errorMsg.id='errorMsg';errorMsg.innerHTML=string;document.body.appendChild(errorMsg);return errorMsg;}
function checkIfDeleted(){var allHtml=document.getElementById('imgHolder');var infoH=document.getElementById('infoH');var thumbH=document.getElementById('thumbH');allHtml.style.display='none';infoH.style.display='none';thumbH.style.display='none';createErrorNotif('You have deleted all the images from cookies');}
Array.prototype.clean=function(to_delete){var a;for(a=0;a<this.length;a++){if(this[a]==to_delete){this.splice(a,1);a--;};};return this;};